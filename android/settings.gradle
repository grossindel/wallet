// --- settings.gradle ---

pluginManagement {
  // RN Gradle plugin is an included build
  includeBuild("../node_modules/@react-native/gradle-plugin")

  // Repos for resolving AGP/Kotlin plugins
  repositories {
    google()
    mavenCentral()
    gradlePluginPortal()
  }

  // (Optional) pin Kotlin plugin version across included builds
  plugins {
    id("org.jetbrains.kotlin.android") version "2.0.21"
    id("org.jetbrains.kotlin.jvm") version "2.0.21"
  }
  resolutionStrategy {
    eachPlugin {
      if (requested.id.id.startsWith("org.jetbrains.kotlin")) {
        useVersion("2.0.21")
      }
    }
  }
}

plugins { id("com.facebook.react.settings") }

// Enable RN autolinking from CLI-generated config
extensions.configure(com.facebook.react.ReactSettingsExtension) { ex ->
  ex.autolinkLibrariesFromCommand()
}

rootProject.name = "SuperWallet"
include(":app")
include(":react-native-config")
project(":react-native-config").projectDir = new File(rootProject.projectDir, "../node_modules/react-native-config/android")

// Ensure the RN Gradle plugin is also available for normal dependency resolution
includeBuild("../node_modules/@react-native/gradle-plugin") {
  dependencySubstitution {
    substitute(module("com.facebook.react:react-native-gradle-plugin")).using(project(":react-native-gradle-plugin"))
  }
}

// Expo autolinking
apply from: new File(
  ["node", "--print", "require.resolve('expo/package.json')"].execute(null, rootDir).text.trim(),
  "../scripts/autolinking.gradle"
)
useExpoModules()

dependencyResolutionManagement {
  repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
  repositories {
    google()
    mavenCentral()
    maven { url 'https://jitpack.io' }
  }
}
